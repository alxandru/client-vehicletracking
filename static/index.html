
<!DOCTYPE html>
<html>
<head>
<script>

setInterval(function(){
   callAjax();
}, 3000);

var callAjax = function(){
  var e = document.getElementById("message");
  var xhr = new XMLHttpRequest();
  xhr.onreadystatechange = function() {
      if (xhr.readyState == 4 && xhr.status == 200) {
        console.log(xhr.responseText);
        e.outerHTML = xhr.responseText;
      }
  }
  xhr.open("GET", "/", true);
  try {
      xhr.send();
  } catch (err) {
      // handle error
  }

  const myHeaders = new Headers();
  myHeaders.append('Content-Type', 'application/json');
  const req = new Request('http://192.168.50.10:8080/events', {
    method:'GET',
    headers: myHeaders,
    mode: 'no-cors',
    cache: 'default',
  });

  fetch(req)
  .then(response => response.json())
  .then(data => {
    console.log(data)
  })
  .catch(console.error);
}



</script>
</head>
<body>

<h1 id="message">Got {{.MessagesTotal}} kafka messages!</h1>


</body>
</html>


